# A dhcpcd configuration for BathyImager Seabed Imager
# Supports dual Ethernet + WiFi connectivity with proper routing priorities
#
# Configuration file for dhcpcd.
# See dhcpcd.conf(5) for details.

# Allow users of this group to interact with dhcpcd via the control socket.
#controlgroup wheel

# Inform the DHCP server of our hostname for DDNS.
hostname

# Use the hardware address of the interface for the Client ID.
clientid
# or
# Use the same DUID + IAID as set in DHCPv6 for DHCPv4 ClientID as per RFC4361.
# Some non-RFC compliant DHCP servers do not reply with this set.
# In this case, comment out duid and enable clientid above.
#duid

# Persist interface configuration when dhcpcd exits.
persistent

# Rapid commit support.
# Safe to enable by default because it requires the equivalent option set
# on the server to actually work.
option rapid_commit

# A list of options to request from the DHCP server.
option domain_name_servers, domain_name, domain_search, host_name
option classless_static_routes
# Respect the network MTU. This is applied to DHCP routes.
option interface_mtu

# Most distributions have NTP support.
option ntp_servers

# A ServerID is required by RFC2131.
require dhcp_server_identifier

# Generate SLAAC address using the Hardware Address of the interface
#slaac hwaddr
# OR generate Stable Private IPv6 Addresses based from the DUID
slaac private

# ============================================================================
# BATHYIMAGER DUAL NETWORK CONFIGURATION
# ============================================================================

# Ethernet Interface (Primary - Lower metric = higher priority)
# Use DHCP for flexibility but prioritize over WiFi
interface eth0
# Set low metric for highest priority (routes through Ethernet first)
metric 100
# Optional: Fallback static IP if DHCP fails
#static ip_address=192.168.1.100/24
#static routers=192.168.1.1
#static domain_name_servers=8.8.8.8 1.1.1.1

# WiFi Interface (Secondary - Higher metric = lower priority) 
# Will be used only if Ethernet is unavailable
interface wlan0
# Set higher metric for secondary priority
metric 300
# WiFi will use DHCP from router
# Optional: Static fallback configuration
#static ip_address=192.168.1.101/24
#static routers=192.168.1.1
#static domain_name_servers=8.8.8.8 1.1.1.1

# ============================================================================
# INTERFACE BEHAVIOR SETTINGS
# ============================================================================

# Wait for carrier detection on Ethernet before using WiFi
# This ensures smooth transitions between interfaces
waitip

# Don't release the lease on exit for faster reconnection
norelease

# Enable IPv6 Router Solicitation
ipv6rs

# Use IPv6 only as a fallback
ipv6only

# ============================================================================
# CUSTOM STATIC CONFIGURATIONS (uncomment and modify as needed)
# ============================================================================

# Example: Ethernet with static IP (for lab/testing environment)
#interface eth0
#static ip_address=10.0.100.50/24
#static routers=10.0.100.1
#static domain_name_servers=8.8.8.8 1.1.1.1
#metric 100

# Example: WiFi with static IP  
#interface wlan0
#static ip_address=192.168.1.50/24
#static routers=192.168.1.1
#static domain_name_servers=8.8.8.8 1.1.1.1
#metric 300

# ============================================================================
# NOTES
# ============================================================================
# - Lower metric = higher priority
# - dhcpcd automatically assigns metrics: 200 + interface_index + 100 for wireless
# - Our manual metrics override the automatic assignment
# - Ethernet (eth0) with metric 100 will always be preferred over WiFi (wlan0) with metric 300
# - Both interfaces can be active simultaneously
# - Traffic will route through Ethernet when available, fall back to WiFi if not
# - You can test interface priority with: ip route list